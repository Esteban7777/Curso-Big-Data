install.packages("rvest")
library(rvest)
library(rvest)
url <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/page1.html"
webpage <- read_html(url)
titles <- webpage %>%
html_nodes(".entry-title a") %>%
html_text()
titles
titles <- webpage %>%
html_nodes("directorio") %>%
html_text()
titles
View(webpage)
webpage
library(rvest)
url <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/page1.html"
webpage <- read_html(url)
# Extract the text content from the webpage
text_content <- html_text(webpage)
# Print the text content
print(text_content)
table <- webpage %>%
html_nodes(".dataframe") %>%
html_table()
table
table <- webpage %>%
html_nodes("table") %>%
html_table()
table
table_data <- html_nodes(webpage, "table") %>%
html_table(fill = TRUE)
webpage
t1<-Sys.time()
library(rvest)
library(tidyverse)
url_base<-my_url <- "https://ignaciomsarmiento.github.io/GEIH2018_sample/pages/geih_page_"
tables_list <- list()
for (i in 1:10){
bucle_url<-paste0(url_base, i, ".html")
my_html=read_html(bucle_url)
table<-my_html %>% html_table()
tables_list[[i]] <- table
}
for (i in 1:10){
bucle_url<-paste0(url_base, i, ".html")
my_html=read_html(bucle_url)
table<-my_html %>% html_table()
tables_list[[i]] <- table
}
data<-dplyr::bind_rows(tables_list)
t2<-Sys.time()
Tiempo_ejecucion<-t2-t1
Tiempo_ejecucion
View(table)
View(data)
data %>%
filter(age >18)
data
data <- data %>%
filter(age >18)
data_h <- data %>%
select(age,cuentaPropia,estrato1,fex_c,fex_dpto,formal,informal,ingtot,maxEducLevel,Oficio,p6210,p6426,p6500,sex,totalHoursWor~d)
data_h <- data %>%
select(age,cuentaPropia,estrato1,fex_c,fex_dpto,formal,informal,ingtot,maxEducLevel,oficio,p6210,p6426,p6500,sex,totalHoursWor~d)
data_h <- data %>%
select(age,cuentaPropia,estrato1,fex_c,fex_dpto,formal,informal,ingtot,maxEducLevel,oficio,p6210,p6426,p6500,sex,totalHoursWored)
data_h <- data %>%
select(age,cuentaPropia,estrato1,fex_c,fex_dpto,formal,informal,ingtot,maxEducLevel,oficio,p6210,p6426,p6500,sex,totalHoursWorked)
View(data_h)
str(data)
str(data_h)
data <- data %>%
filter(age >18) %>%
rename(
Edad= age,
Estrato=estrato1,
Ingreso=ingtot,
Educacion=p6210,
Experiencia= p6426,
Salario=p6500,
Sexo=sex,
Horas_trabajadas=totalHoursWorked
)
data_h <- data %>%
select(Edad,cuentaPropia,Estrato,fex_c,fex_dpto,formal,informal,Ingreso,maxEducLevel,oficio,Educacion,Experiencia,Salario,Sexo,Horas_trabajadas)
str(data_h)
# Limpieza de mayores de edad: Este chunk lo usamos solo como limpieza de datos
data <- data %>%
filter(age >18) %>%
rename(
Edad= age,
Estrato=estrato1,
Ingreso=ingtot,
Educacion=p6210,
Experiencia= p6426,
Salario=p6500,
Sexo=sex,
Horas_trabajadas=totalHoursWorked
)  %>%
mutate(
across(c(cuentaPropia,Estrato,formal,informal,maxEducLevel,oficio,Educacion,Sexo),as.character)
)
data <- data %>%
rename(
Edad= age,
Estrato=estrato1,
Ingreso=ingtot,
Educacion=p6210,
Experiencia= p6426,
Salario=p6500,
Sexo=sex,
Horas_trabajadas=totalHoursWorked
)  %>%
mutate(
across(c(cuentaPropia,Estrato,formal,informal,maxEducLevel,oficio,Educacion,Sexo),as.character)
)
table<-my_html %>% html_table()
tables_list[[i]] <- table
for (i in 1:10){
bucle_url<-paste0(url_base, i, ".html")
my_html=read_html(bucle_url)
table<-my_html %>% html_table()
tables_list[[i]] <- table
}
data<-dplyr::bind_rows(tables_list)
Tiempo_ejecucion
data <- data %>%
filter(age >18)
data <- data %>%
rename(
Edad= age,
Estrato=estrato1,
Ingreso=ingtot,
Educacion=p6210,
Experiencia= p6426,
Salario=p6500,
Sexo=sex,
Horas_trabajadas=totalHoursWorked
)  %>%
mutate(
across(c(cuentaPropia,Estrato,formal,informal,maxEducLevel,oficio,Educacion,Sexo),as.character)
)
data_h <- data %>%
select(Edad,cuentaPropia,Estrato,fex_c,fex_dpto,formal,informal,Ingreso,maxEducLevel,oficio,Educacion,Experiencia,Salario,Sexo,Horas_trabajadas)
str(data_h)
character_cols <- data_h %>%
select(where(is.character))
character_plots <- map(character_cols, ~ ggplot(df, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", .)) +
theme_minimal())
character_cols <- data_h %>%
select(where(is.character))
character_plots <- map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", .)) +
theme_minimal())
library(gridExtra)
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
character_plots <-  map2(character_cols, names(character_cols), ~ ggplot(datah, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", .)) +
theme_minimal())
character_cols <- data_h %>%
select(where(is.character))
character_plots <-  map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", .)) +
theme_minimal())
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
character_plots <-  map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", names(.))) +
theme_minimal())
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
character_plots <- map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", names(.))) +
theme_minimal())
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", names(.))) +
theme_minimal() +
theme(plot.title = element_text(color = "white")))
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
# Create individual plots for character columns
map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", names(.))) +
theme_minimal() +
theme(plot.title = element_text(color = "Blank")))
# Create individual plots for character columns
map(character_cols, ~ ggplot(data_h, aes(x = .)) +
geom_bar() +
labs(title = paste("Bar Plot of", names(.))) +
theme_minimal() +
theme(plot.title = element_text(color = "Blanck")))
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
haracter_plots <- map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_bar() +
ggtitle(paste("Bar Plot of", .y)) +
theme_minimal() +
theme(plot.title = element_text(color = "white")))
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
character_plots <-map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_bar() +
ggtitle("") +  # Set the title to blank
theme_minimal() +
theme(plot.title = element_text(color = "white", hjust = 0)))  # Set title text color to white
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
character_plots <-map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_bar() +
ggtitle("") +  # Set the title to blank
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))  # Set title text color to white
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
# Create individual plots for character columns
character_plots <- map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_bar() +
ggtitle(paste("Bar Plot of", .y)) +  # Set the title to the column name
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))
# Arrange character plots in a grid
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
character_cols <- data_h %>%
select(where(is.character))
character_plots <- map2(character_cols, names(character_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_bar() +
ggtitle(paste("Distribucion", .y)) +
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))
character_grid <- grid.arrange(grobs = character_plots, ncol = 2)
numeric_cols <- data_h %>%
select(where(is.numeric))
numeric_plots <- map2(numeric_cols, names(numeric_cols), ~ ggplot(data_h, aes(x = 1, y = .x)) +
geom_boxplot() +
ggtitle(paste("Box Plot of", .y)) +  # Set the title to the column name
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))  # Set title text color to black
numeric_grid <- grid.arrange(grobs = numeric_plots, ncol = 2)
numeric_cols <- data_h %>%
select(where(is.numeric))
numeric_plots <- map2(numeric_cols, names(numeric_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_histogram(fill = "skyblue", color = "black", bins = 10) +
ggtitle(paste("Histogram of", .y)) +  # Set the title to the column name
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))
numeric_grid <- grid.arrange(grobs = numeric_plots, ncol = 2)
data_h <- data %>%
select(Edad,cuentaPropia,Estrato,formal,informal,Ingreso,maxEducLevel,oficio,Educacion,Experiencia,Salario,Sexo,Horas_trabajadas)
numeric_cols <- data_h %>%
select(where(is.numeric))
numeric_plots <- map2(numeric_cols, names(numeric_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_histogram(fill = "skyblue", color = "black", bins = 10) +
ggtitle(paste("Histogram of", .y)) +  # Set the title to the column name
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))
numeric_grid <- grid.arrange(grobs = numeric_plots, ncol = 2)
numeric_cols <- data_h %>%
select(where(is.numeric))
numeric_plots <- map2(numeric_cols, names(numeric_cols), ~ ggplot(data_h, aes(x = .x)) +
geom_histogram(fill = "skyblue", color = "black", bins = 10) +
ggtitle(paste("Distribucion of", .y)) +  # Set the title to the column name
theme_minimal() +
theme(plot.title = element_text(color = "black", hjust = 0)))
numeric_grid <- grid.arrange(grobs = numeric_plots, ncol = 2)
